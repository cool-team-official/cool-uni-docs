import{d as e,r as a,x as s,a6 as r,E as o,aG as l,a3 as n,a as i,b as t,c,e as d,w as u,R as p,f as g,i as m,F as y,A as f,z as h,J as w,k as _,l as v,B as L}from"./index-BXs9N0aO.js";import{h as z,u as b,p as B,f as E}from"./cl-page.D0l32468.js";import{_ as S}from"./_plugin-vue_export-helper.D4XvEQHf.js";function k(e){return z(e)&&e!=+e}const x=S(e({name:"cl-image",props:{src:String,mode:{type:String,default:"aspectFill"},size:{type:[String,Number,Array],default:"100%"},round:Boolean,previewCurrent:String,previewList:Array,lazyLoad:Boolean,fadeShow:{type:Boolean,default:!0},webp:Boolean,showMenuByLongpress:Boolean,showLoading:{type:Boolean,default:!0}},setup(e,{emit:i}){const t=a(!1),c=a(!1),d=s((()=>{const[e,a]=u.value;let s="0",r="0";return k(parseInt(e))&&(r=a),k(parseInt(a))&&(s=e),{height:e,width:a,minWidth:s,minHeight:r}})),u=s((()=>{let a=["100%","100%"];return l(e.size)||z(e.size)?a=[e.size,e.size]:n(e.size)&&(a=e.size),a.map(B)}));return r((()=>e.src),(e=>{c.value=!!e,t.value=!1}),{immediate:!0}),{isError:t,isLoading:c,size:u,imgStyle:d,handleError:function(e){t.value=!0,c.value=!1,i("error",e)},handleLoad:function(e){t.value=!1,c.value=!1,i("load",e)},onPreview:function(a){e.previewList&&(o({urls:e.previewList||[],current:e.previewCurrent||e.src}),a.stopPropagation())},...b()}}}),[["render",function(e,a,s,r,o,l){const n=_,z=v,b=i(t("cl-loading"),E),B=L;return c(),d(z,{class:h(["cl-image",[{"is-round":e.round,"is-error":!e.src||e.isError}]]),style:w([e.imgStyle,e.baseStyle]),onClick:e.onPreview},{default:u((()=>[e.src?e.isError?(c(),d(z,{key:1,class:"cl-image__error"},{default:u((()=>[p(e.$slots,"error",{},(()=>[g(n,{class:"icon cl-icon-image-error"})]))])),_:3})):(c(),m(y,{key:2},[e.isLoading&&e.showLoading?(c(),d(z,{key:0,class:"cl-image__loading"},{default:u((()=>[g(b)])),_:1})):f("",!0),g(B,{class:"cl-image__target",src:e.src,mode:e.mode,"lazy-load":e.lazyLoad,webp:e.webp,"show-menu-by-longpress":e.showMenuByLongpress,onError:e.handleError,onLoad:e.handleLoad},null,8,["src","mode","lazy-load","webp","show-menu-by-longpress","onError","onLoad"]),p(e.$slots,"default")],64)):(c(),d(z,{key:0,class:"cl-image__placeholder"},{default:u((()=>[p(e.$slots,"placeholder",{},(()=>[g(n,{class:"icon cl-icon-image"})]))])),_:3}))])),_:3},8,["style","class","onClick"])}]]);export{x as _};
