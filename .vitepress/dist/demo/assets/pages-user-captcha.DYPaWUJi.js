import{_ as s}from"./cl-topbar.CSdNb0-k.js";import{d as e,a,b as o,r as t,c as l,o as n,e as r,f as d,g as c,h as p,w as u,j as i,k as m,t as f,l as h,x as g,v as _}from"./index-Dlau7bkh.js";import{_ as b}from"./cl-captcha.BpLhYKAz.js";import{c as j,b as x}from"./cl-page.C3y_EXfh.js";import{u as v}from"./index.AbH2Jzti.js";import{u as C}from"./index.Dnq2RgDG.js";import{S as k}from"./sms-btn.BVBrOTE7.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./cl-text.DUw3LhC2.js";import"./cl-input.Cxen37Qp.js";const y=e({name:"undefined"}),V=w(e({...y,setup(e){const{service:w,router:y,refs:V,setRefs:z}=v(),{user:B}=a(),T=C(),{t:q}=o(),D=t(!1),I=l({smsCode:"",phone:""});function L(){D.value=!0,w.user.login.phone(I).then((async s=>{B.setToken(s),await B.get(),y.nextLogin()})).catch((s=>{T.showTips(s.message||q("登录失效，请重试~")),D.value=!1,I.smsCode=""}))}return n((()=>{I.phone=y.query.phone||"",V.smsBtn.startCountdown()})),(e,a)=>{const o=r(d("cl-topbar"),s),t=g,l=r(d("cl-captcha"),b),n=_,v=r(d("cl-button"),j),C=r(d("cl-page"),x);return c(),p(C,{"background-color":"#fff"},{default:u((()=>[i(n,{class:"page-captcha"},{default:u((()=>[i(o,{border:!1}),i(n,{class:"container"},{default:u((()=>[i(t,{class:"label"},{default:u((()=>[m(f(h(q)("输入验证码")),1)])),_:1}),i(t,{class:"tips"},{default:u((()=>[m(f(h(q)("已发送至"))+" +86 "+f(I.phone),1)])),_:1}),i(n,{class:"code"},{default:u((()=>[i(l,{focus:"",modelValue:I.smsCode,"onUpdate:modelValue":a[0]||(a[0]=s=>I.smsCode=s),length:4,gutter:26,onDone:L},null,8,["modelValue"])])),_:1}),i(v,{type:"primary",disabled:4!==I.smsCode.length,loading:D.value,fill:"",height:90,"font-size":30,onClick:L},{default:u((()=>[m(f(h(q)("确定")),1)])),_:1},8,["disabled","loading"]),i(n,{class:"send"},{default:u((()=>[i(k,{size:"small",border:!1,phone:I.phone,ref:h(z)("smsBtn")},null,8,["phone"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-f05a4a61"]]);export{V as default};
