import{d as e,b as l,c as a,ac as t,B as o,e as s,f as d,g as c,h as i,w as r,j as n,k as u,t as p,n as m,D as f,E as _,V as b,x as v,v as h,F as y,p as k,N as w,O as x,ah as g,r as V,a8 as E}from"./index-Dlau7bkh.js";import{g as C,c as j,b as $}from"./cl-page.C3y_EXfh.js";import{_ as I}from"./cl-col.BBB0nrgy.js";import{_ as B}from"./cl-row.B3dS1wxL.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as S}from"./cl-card.BPBZxryb.js";import{_ as U}from"./cl-input.Cxen37Qp.js";import"./index.AbH2Jzti.js";import"./cl-text.DUw3LhC2.js";const z=A(e({name:"cl-filter-item",props:{prop:{type:String,required:!0},type:{type:String,default:"switch"},label:String,disabled:Boolean,multiple:Boolean,theme:{type:String,default:"default"},gridCols:{type:Number,default:4},options:{type:Array,default:()=>[]}},emits:["change"],setup(e,{emit:s}){l();const d=C("cl-filter-bar",["form","setExpand","update","close","collapse"],["collapse","clear"]),c=a({name:"",list:[],isExpand:!1});t((()=>e.options),(e=>{c.list=e}),{immediate:!0});const i=o((()=>{var l;const a=null==(l=d.value)?void 0:l.form[e.prop];if("dropdown"===e.type)if(!e.multiple){const e=c.list.find((e=>e.value==a));e&&(c.name=e.label)}return a})),r=o((()=>[{"is-switch":i.value&&"switch"==e.type,"is-expand":c.isExpand,"is-only":!d.value,"is-disabled":e.disabled}])),n=o((()=>"grid"==e.theme?`calc(${100/e.gridCols}% - 20rpx)`:"auto"));function u(l){if(l==e.prop)return!1;c.isExpand&&(c.isExpand=!1,d.value&&d.value.setExpand(!1))}function p(l,a){s("change",l),d.value&&d.value.update({prop:e.prop,value:l,action:a})}return{value:i,classList:r,dropdown:c,itemWidth:n,checkItem:function(l){if(l.disabled)return!1;e.multiple?l.checked=!l.checked:(l.checked?(l.checked=!1,c.name=e.label||"",p(void 0)):(c.list.forEach((e=>{e.checked=e.value==l.value})),c.name=l.label,p(l.value)),u())},tapItem:function(){if(e.disabled)return!1;switch(d.value&&d.value.collapse(e.prop),e.type){case"dropdown":if(c.isExpand)u();else{let l=e.multiple?i.value||[]:[i.value];c.list.map((a=>{a.checked=l.includes(a.value),a.checked&&(e.multiple||(c.name=a.label))})),c.isExpand||(c.isExpand=!0,d.value&&d.value.setExpand(!0))}break;case"switch":p(!i.value);break;case"order":i.value?"asc"==i.value?p("desc"):"desc"==i.value&&p(""):p("asc")}},confirm:function(){p(c.list.filter((e=>e.checked)).map((e=>e.value))),u()},clear:function(){e.multiple?p([],"clear"):p(void 0,"clear"),c.name=e.label||"",u()},collapse:u}}}),[["render",function(e,l,a,t,o,V){const E=v,C=h,$=g,A=s(d("cl-button"),j),S=s(d("cl-col"),I),U=s(d("cl-row"),B);return c(),i(C,{class:f(["cl-filter-item",e.classList]),onClick:e.tapItem},{default:r((()=>[n(E,{class:"cl-filter-item__label"},{default:r((()=>[u(p(e.dropdown.name||e.label),1)])),_:1}),"dropdown"==e.type?(c(),i(E,{key:0,class:"cl-icon-caret-bottom cl-filter-item__dropdown-icon"})):"switch"==e.type?(c(),m(y,{key:1},[],64)):"order"==e.type?(c(),i(C,{key:2,class:f(["cl-filter-item__order",[`is-${e.value}`]])},{default:r((()=>[n(E,{class:"cl-filter-item__order-asc"}),n(E,{class:"cl-filter-item__order-desc"})])),_:1},8,["class"])):_("",!0),n(C,{class:f(["cl-filter-item__dropdown-box",[`theme-${e.theme}`]])},{default:r((()=>[b(e.$slots,"dropdown",{},(()=>[e.dropdown.list?(c(),m(y,{key:0},[e.dropdown.list.length>0?(c(),m(y,{key:0},[n($,{class:"cl-filter-item__dropdown-box__list","scroll-y":""},{default:r((()=>[(c(!0),m(y,null,k(e.dropdown.list,((l,a)=>(c(),i(C,{class:f(["cl-filter-item__dropdown-box__item",[l.checked?"is-checked":"",l.disabled?"is-disabled":""]]),style:w({width:e.itemWidth}),key:a,onClick:x((a=>e.checkItem(l)),["stop"])},{default:r((()=>[n(E,{class:"cl-filter-item__dropdown-box__label"},{default:r((()=>[u(p(l.label),1)])),_:2},1024),n(E,{class:"cl-icon-check"})])),_:2},1032,["class","style","onClick"])))),128))])),_:1}),e.multiple?(c(),i(C,{key:0,class:"cl-filter-item__dropdown-box__btn"},{default:r((()=>[n(U,{gutter:30},{default:r((()=>[n(S,{span:12},{default:r((()=>[n(A,{fill:"",round:"",onClick:e.clear},{default:r((()=>[u(p(e.$t("清空")),1)])),_:1},8,["onClick"])])),_:1}),n(S,{span:12},{default:r((()=>[n(A,{fill:"",round:"",type:"primary",onClick:e.confirm},{default:r((()=>[u(p(e.$t("确认")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):_("",!0)],64)):b(e.$slots,"empty",{key:1},(()=>[n(C,{class:"cl-filter-item__dropdown-box__empty"},{default:r((()=>[u(p(e.$t("暂无数据")),1)])),_:1})]))],64)):_("",!0)]))])),_:3},8,["class"])])),_:3},8,["class","onClick"])}]]);const N=A(e({name:"cl-filter-bar",props:{modelValue:{type:Object,default:()=>({})},num:Number},setup(e,{emit:l}){const{proxy:a}=E(),o=V(e.modelValue);t((()=>e.modelValue),(e=>{o.value=e}),{immediate:!0,deep:!0});let s=null;const d=V(!1),c=V(1);function i(e){clearTimeout(s),e?c.value=999:s=setTimeout((()=>{c.value=1}),300),d.value=e}function r(e){a.__children.forEach((l=>{l.collapse(e)}))}return{form:o,zIndex:c,isExpand:d,setExpand:i,collapse:r,close:function(){i(!1),r()},clear:function(){a.__children.forEach((e=>{e.clear()})),l("update:modelValue",o.value),l("clear")},update:function(e){o.value[e.prop]=e.value,"clear"!=e.action&&(l("update:modelValue",o.value),l("change",e))}}}}),[["render",function(e,l,a,t,o,s){const d=h;return c(),i(d,{class:f(["cl-filter-bar__wrap",[{"is-expand":e.isExpand}]])},{default:r((()=>[n(d,{class:"cl-filter-bar",style:w({zIndex:e.zIndex})},{default:r((()=>[b(e.$slots,"default")])),_:3},8,["style"]),n(d,{class:"cl-filter-bar__mask",onClick:e.close,onTouchmove:l[0]||(l[0]=x((()=>{}),["stop","prevent"]))},null,8,["onClick"])])),_:3},8,["class"])}]]),T=e({name:"undefined"}),L=A(e({...T,setup(e){const l=V({d1:[]});return(e,a)=>{const t=s(d("cl-filter-item"),z),o=s(d("cl-filter-bar"),N),p=s(d("cl-card"),S),m=s(d("cl-input"),U),f=s(d("cl-button"),j),_=h,b=s(d("cl-page"),$);return c(),i(b,{padding:20},{default:r((()=>[n(p,{label:"基础用法"},{default:r((()=>[n(o,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),num:4},{default:r((()=>[n(t,{label:"排序",prop:"order",type:"order"}),n(t,{label:"开关",prop:"switch",type:"switch"})])),_:1},8,["modelValue"])])),_:1}),n(p,{label:"展开列表"},{default:r((()=>[n(o,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e)},{default:r((()=>[n(t,{label:"多选",prop:"d1",type:"dropdown",multiple:"",options:[{label:"A",value:1},{label:"B",value:2}]}),n(t,{label:"单选",prop:"d2",type:"dropdown",options:[{label:"A",value:1},{label:"B",value:2}]})])),_:1},8,["modelValue"])])),_:1}),n(p,{label:"展开宫格"},{default:r((()=>[n(o,{modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value=e)},{default:r((()=>[n(t,{label:"多选",prop:"d1",type:"dropdown",multiple:"",options:[{label:"A",value:1},{label:"B",value:2}],theme:"grid"}),n(t,{label:"单选",prop:"d2",type:"dropdown",options:[{label:"A",value:1},{label:"B",value:2}],theme:"grid"})])),_:1},8,["modelValue"])])),_:1}),n(p,{label:"展开自定义"},{default:r((()=>[n(o,{modelValue:l.value,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value=e)},{default:r((()=>[n(t,{label:"输入框",prop:"input",type:"dropdown"},{dropdown:r((()=>[n(_,{class:"cs",onClick:a[3]||(a[3]=x((()=>{}),["stop"]))},{default:r((()=>[n(m),n(f,{margin:[0,0,0,20]},{default:r((()=>[u("搜索")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-70ef7cb5"]]);export{L as default};
