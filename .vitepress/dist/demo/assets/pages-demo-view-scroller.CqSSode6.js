import{_ as o}from"./cl-list-item.DKPqGbx2.js";import{d as e,ae as l,c as t,r as a,ac as n,B as s,T as r,a8 as c,e as u,f as i,g as p,h as d,w as f,j as m,V as h,N as T,O as v,D as b,k as g,t as x,E as _,v as w,ah as k,x as y,o as B,n as S,p as j,F as $,l as E}from"./index-Dlau7bkh.js";import{f as F,_ as I,b as z}from"./cl-page.C3y_EXfh.js";import{_ as N}from"./cl-text.DUw3LhC2.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as V}from"./index.AbH2Jzti.js";import{r as A}from"./range.F11Nzdx0.js";import"./isBoolean.Bco7Ljdy.js";const C=M(e({props:{top:{type:Number,default:80},bottom:{type:Number,default:100},loadingText:{type:String,default:l("正在刷新")},pullingText:{type:String,default:l("下拉刷新")},releaseText:{type:String,default:l("释放刷新")},scrollTop:Number,scrollIntoView:String,scrollWithAnimation:{type:Boolean,default:!0},enableBackToTop:Boolean,showBackTopButton:{type:Boolean,default:!0},showScrollbar:Boolean,enableFlex:Boolean,refresherEnabled:{type:Boolean,default:!0}},emits:["down","up","scroll"],setup(o,{emit:e}){const{proxy:l}=c(),u=t({start:0,move:0}),i=a(0);n((()=>o.scrollTop),(o=>{i.value=o||0}),{immediate:!0});const p=a(!1),d=a("end"),f=s((()=>u.move?`translate3d(0, ${u.move}px, 0)`:"")),m=s((()=>["end","loading"].includes(d.value)?"transform 0.3s":"")),h=s((()=>u.move>=o.top)),T=s((()=>{switch(d.value){case"pulling":return h.value?o.releaseText:o.pullingText;case"loading":return o.loadingText;default:return o.pullingText}}));function v(){r().in(l).select(".cl-scroller__loading").fields({size:!0},(o=>{d.value="loading",u.move=o.height||0,e("down",b)})).exec()}function b(){d.value="end",u.move=0}return{touch:u,scrollTop2:i,backTopButtonFadeIn:p,status:d,transform:f,transition:m,isReleasable:h,text:T,onScroll:function(o){p.value=o.detail.scrollTop>=200,e("scroll",o)},onTouchStart:function(e){"end"==d.value&&o.refresherEnabled&&(u.start=e.changedTouches[0].clientY,d.value="pulling")},onTouchMove:function(o){if("pulling"==d.value&&i.value<=10){let e=o.changedTouches[0].clientY-u.start;e<=200&&(u.move=e)}},onTouchEnd:function(){h.value?v():b()},down:v,up:function(){e("up")},end:b,scrollTo:function(o){i.value=o},backTop:function(){i.value=Math.random()}}}}),[["render",function(o,e,l,t,a,n){const s=u(i("cl-loading"),F),r=u(i("cl-text"),N),c=w,B=k,S=u(i("cl-icon"),I),j=y;return p(),d(c,{class:"cl-scroller__wrap"},{default:f((()=>[m(c,{class:"cl-scroller__loading",style:T({transform:o.transform,transition:o.transition})},{default:f((()=>[h(o.$slots,"loading",{text:o.text,status:o.status,move:o.touch.move},(()=>["loading"==o.status?(p(),d(s,{key:0,size:35})):_("",!0),m(r,{size:26,margin:[0,0,0,14],value:o.text},null,8,["value"])]))])),_:3},8,["style"]),m(c,{class:"cl-scroller",style:T({transform:o.transform,transition:o.transition}),onTouchmove:v(o.onTouchMove,["stop"]),onTouchstart:o.onTouchStart,onTouchend:o.onTouchEnd},{default:f((()=>[m(B,{class:"cl-scroller__view","scroll-y":"","lower-top":o.bottom,"scroll-top":o.scrollTop2,"scroll-into-view":o.scrollIntoView,"scroll-with-animation":o.scrollWithAnimation,"enable-back-to-top":o.enableBackToTop,"show-scrollbar":o.showScrollbar,"enable-flex":o.enableFlex,onScroll:o.onScroll,onScrolltolower:o.up},{default:f((()=>[h(o.$slots,"default")])),_:3},8,["lower-top","scroll-top","scroll-into-view","scroll-with-animation","enable-back-to-top","show-scrollbar","enable-flex","onScroll","onScrolltolower"])])),_:3},8,["style","onTouchmove","onTouchstart","onTouchend"]),o.showBackTopButton?(p(),d(c,{key:0,class:b(["cl-scroller__back-top",[{fadeIn:o.backTopButtonFadeIn}]]),onClick:o.backTop},{default:f((()=>[m(S,{name:"top",color:"#666"}),m(j,{class:"cl-scroller__back-top-text"},{default:f((()=>[g(x(o.$t("顶部")),1)])),_:1})])),_:1},8,["class","onClick"])):_("",!0)])),_:3})}]]),D=e({name:"undefined"}),R=e({...D,setup(e){const{refs:l,setRefs:t}=V(),n=a([]);function s(){setTimeout((()=>{const o=A(n.value.length,n.value.length+20);n.value.push(...o)}),300)}function r(){n.value=A(20),setTimeout((()=>{l.scroller.end()}),5e4)}return B((()=>{r()})),(e,l)=>{const a=u(i("cl-list-item"),o),c=u(i("cl-scroller"),C),h=u(i("cl-page"),z);return p(),d(h,{fullscreen:""},{default:f((()=>[m(c,{ref:E(t)("scroller"),onUp:s,onDown:r},{default:f((()=>[(p(!0),S($,null,j(n.value,((o,e)=>(p(),d(a,{key:e,label:`${o+1}`,padding:[0,20,0,20],border:""},null,8,["label"])))),128))])),_:1},512)])),_:1})}}});export{R as default};
