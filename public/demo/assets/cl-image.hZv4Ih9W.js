import{d as e,r as a,B as s,ac as r,J as o,aC as l,a9 as n,e as i,f as t,g as c,h as d,w as u,V as p,n as g,j as m,E as y,F as h,D as w,N as f,v,q as _,x as L}from"./index-Dlau7bkh.js";import{h as z,u as B,p as b,f as E}from"./cl-page.C3y_EXfh.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";function k(e){return z(e)&&e!=+e}const C=S(e({name:"cl-image",props:{src:String,mode:{type:String,default:"aspectFill"},size:{type:[String,Number,Array],default:"100%"},round:Boolean,previewCurrent:String,previewList:Array,lazyLoad:Boolean,fadeShow:{type:Boolean,default:!0},webp:Boolean,showMenuByLongpress:Boolean,showLoading:{type:Boolean,default:!0}},setup(e,{emit:i}){const t=a(!1),c=a(!1),d=s((()=>{const[e,a]=u.value;let s="0",r="0";return k(parseInt(e))&&(r=a),k(parseInt(a))&&(s=e),{height:e,width:a,minWidth:s,minHeight:r}})),u=s((()=>{let a=["100%","100%"];return l(e.size)||z(e.size)?a=[e.size,e.size]:n(e.size)&&(a=e.size),a.map(b)}));return r((()=>e.src),(e=>{c.value=!!e,t.value=!1}),{immediate:!0}),{isError:t,isLoading:c,size:u,imgStyle:d,handleError:function(e){t.value=!0,c.value=!1,i("error",e)},handleLoad:function(e){t.value=!1,c.value=!1,i("load",e)},onPreview:function(a){e.previewList&&(o({urls:e.previewList||[],current:e.previewCurrent||e.src}),a.stopPropagation())},...B()}}}),[["render",function(e,a,s,r,o,l){const n=L,z=v,B=i(t("cl-loading"),E),b=_;return c(),d(z,{class:w(["cl-image",[{"is-round":e.round,"is-error":!e.src||e.isError}]]),style:f([e.imgStyle,e.baseStyle]),onClick:e.onPreview},{default:u((()=>[e.src?e.isError?(c(),d(z,{key:1,class:"cl-image__error"},{default:u((()=>[p(e.$slots,"error",{},(()=>[m(n,{class:"icon cl-icon-toast-warning"})]))])),_:3})):(c(),g(h,{key:2},[e.isLoading&&e.showLoading?(c(),d(z,{key:0,class:"cl-image__loading"},{default:u((()=>[m(B)])),_:1})):y("",!0),m(b,{class:"cl-image__target",src:e.src,mode:e.mode,"lazy-load":e.lazyLoad,webp:e.webp,"show-menu-by-longpress":e.showMenuByLongpress,onError:e.handleError,onLoad:e.handleLoad},null,8,["src","mode","lazy-load","webp","show-menu-by-longpress","onError","onLoad"]),p(e.$slots,"default")],64)):(c(),d(z,{key:0,class:"cl-image__placeholder"},{default:u((()=>[p(e.$slots,"placeholder",{},(()=>[m(n,{class:"icon cl-icon-image"})]))])),_:3}))])),_:3},8,["style","class","onClick"])}]]);export{C as _};
