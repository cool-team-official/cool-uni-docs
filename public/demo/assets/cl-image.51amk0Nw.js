import{d as e,f as a,c as s,aa as r,K as o,aI as l,a7 as n,k as i,l as t,o as c,a as d,w as u,r as p,p as g,v as m,F as y,G as w,n as f,b as h,y as _,i as v,H as L}from"./index-CzDL0q2O.js";import{h as z,u as b,p as B,f as S}from"./cl-page.DOOy25Dj.js";import{_ as k}from"./_plugin-vue_export-helper.DhhdjX9X.js";function E(e){return z(e)&&e!=+e}const C=k(e({name:"cl-image",props:{src:String,mode:{type:String,default:"aspectFill"},size:{type:[String,Number,Array],default:"100%"},round:Boolean,previewCurrent:String,previewList:Array,lazyLoad:Boolean,fadeShow:{type:Boolean,default:!0},webp:Boolean,showMenuByLongpress:Boolean,showLoading:{type:Boolean,default:!0}},setup(e,{emit:i}){const t=a(!1),c=a(!1),d=s((()=>{const[e,a]=u.value;let s="0",r="0";return E(parseInt(e))&&(r=a),E(parseInt(a))&&(s=e),{height:e,width:a,minWidth:s,minHeight:r}})),u=s((()=>{let a=["100%","100%"];return l(e.size)||z(e.size)?a=[e.size,e.size]:n(e.size)&&(a=e.size),a.map(B)}));return r((()=>e.src),(e=>{c.value=!!e,t.value=!1}),{immediate:!0}),{isError:t,isLoading:c,size:u,imgStyle:d,handleError:function(e){t.value=!0,c.value=!1,i("error",e)},handleLoad:function(e){t.value=!1,c.value=!1,i("load",e)},onPreview:function(a){e.previewList&&(o({urls:e.previewList||[],current:e.previewCurrent||e.src}),a.stopPropagation())},...b()}}}),[["render",function(e,a,s,r,o,l){const n=_,z=v,b=i(t("cl-loading"),S),B=L;return c(),d(z,{class:f(["cl-image",[{"is-round":e.round,"is-error":!e.src||e.isError}]]),style:h([e.imgStyle,e.baseStyle]),onClick:e.onPreview},{default:u((()=>[e.src?e.isError?(c(),d(z,{key:1,class:"cl-image__error"},{default:u((()=>[p(e.$slots,"error",{},(()=>[g(n,{class:"icon cl-icon-toast-warning"})]))])),_:3})):(c(),m(y,{key:2},[e.isLoading&&e.showLoading?(c(),d(z,{key:0,class:"cl-image__loading"},{default:u((()=>[g(b)])),_:1})):w("",!0),g(B,{class:"cl-image__target",src:e.src,mode:e.mode,"lazy-load":e.lazyLoad,webp:e.webp,"show-menu-by-longpress":e.showMenuByLongpress,onError:e.handleError,onLoad:e.handleLoad},null,8,["src","mode","lazy-load","webp","show-menu-by-longpress","onError","onLoad"]),p(e.$slots,"default")],64)):(c(),d(z,{key:0,class:"cl-image__placeholder"},{default:u((()=>[p(e.$slots,"placeholder",{},(()=>[g(n,{class:"icon cl-icon-image"})]))])),_:3}))])),_:3},8,["style","class","onClick"])}]]);export{C as _};
